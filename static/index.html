<html>
<head>
<link rel="stylesheet" href="css/game.css" type="text/css" media="screen" /> 

<script src="js/jquery-1.4.2.min.js"></script>
<script src="js/jquery-ui-1.8.2.custom.mins.js"></script>
<script src="js/underscore-0.6.0.min.js"></script>
<script src="js/game.js"></script>

<script>
  var config = {
    heartbeat_interval: 200,
    board: {
      tile_width: 40,
      tile_height: 40,
      tile_count: function() { return this.tile_width * this.tile_height }
    }    
  }
  
  
  $(function() {
    game.init_clock(200);
    $('#content').initTiles(config.board);
    
    $('#content').delegate('.tile', 'click', game.update_player_intentions);
    
    $('.actor').live('g:heartbeat', function() {
      var intentions = $(this).data('intentions');
      
      if (!_.isEmpty(intentions)) {
        var next = _(intentions).last();
        next();
        _(intentions).pop();
        $(this).data('intentions', intentions);
      }
    });
    
    $('.tile').each(function() {
      var $this = $(this);  
      if(!$this.data('row')) {
        var id_parts = $this.attr('id').split('-');
        $this.data('row', parseInt(id_parts[1])).data('col', parseInt(id_parts[2]));
      }
    });
    
    $('#cell-4-4').html('<div id="player" class="player monkey actor facing-right sprite-0"></div>').data('row', 4).data('col', 4);
    $('#player').data('animation', {sprite:'sprite', num: 0, total: 4});
    
    
  })
</script>
</head>
<body>
  <div id="content"></div>
</body>
</html>